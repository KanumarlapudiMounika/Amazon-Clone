{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../order.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction OrderHistoryComponent_div_7_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"div\", 9)(2, \"strong\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 10);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"p\")(7, \"strong\");\n    i0.ɵɵtext(8, \"Amount:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\")(11, \"strong\");\n    i0.ɵɵtext(12, \"Product:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"p\")(15, \"strong\");\n    i0.ɵɵtext(16, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"p\")(19, \"strong\");\n    i0.ɵɵtext(20, \"Created At:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(21);\n    i0.ɵɵpipe(22, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function OrderHistoryComponent_div_7_div_1_Template_button_click_23_listener() {\n      const order_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.reorder(order_r2));\n    });\n    i0.ɵɵtext(24, \"Reorder\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const order_r2 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Order #\", order_r2.id, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r2.status);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \\u20B9\", order_r2.amount, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", order_r2.productName, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", order_r2.description, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(22, 6, order_r2.createdAt, \"short\"), \"\");\n  }\n}\nfunction OrderHistoryComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtemplate(1, OrderHistoryComponent_div_7_div_1_Template, 25, 9, \"div\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.orders);\n  }\n}\nfunction OrderHistoryComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Error fetching orders: \", ctx_r2.error, \"\");\n  }\n}\nexport let OrderHistoryComponent = /*#__PURE__*/(() => {\n  class OrderHistoryComponent {\n    constructor(orderService, route) {\n      this.orderService = orderService;\n      this.route = route;\n      this.email = '';\n      this.orders = [];\n      this.error = '';\n      this.Orders = [];\n      this.allOrders = [];\n    }\n    ngOnInit() {\n      this.route.queryParams.subscribe(params => {\n        const email = params['email'];\n        if (email) {\n          this.email = email;\n          this.fetchOrderHistory();\n        }\n      });\n    }\n    fetchOrderHistory() {\n      this.orderService.getOrderHistory(this.email).subscribe({\n        next: data => this.orders = data,\n        error: () => this.error = 'No orders found or server error.'\n      });\n    }\n    reorder(order) {\n      const reorderData = {\n        email: this.email,\n        amount: order.amount\n      };\n      this.orderService.reorder(reorderData).subscribe({\n        next: () => {\n          alert('Reorder successful!');\n          this.fetchOrderHistory();\n        },\n        error: () => {\n          alert('Failed to reorder.');\n        }\n      });\n    }\n    static {\n      this.ɵfac = function OrderHistoryComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || OrderHistoryComponent)(i0.ɵɵdirectiveInject(i1.OrderService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: OrderHistoryComponent,\n        selectors: [[\"app-order-history\"]],\n        decls: 9,\n        vars: 3,\n        consts: [[1, \"order-history-container\"], [1, \"email-section\"], [\"placeholder\", \"Enter your email\", 1, \"email-input\", 3, \"ngModelChange\", \"ngModel\"], [1, \"get-order\", 3, \"click\"], [\"class\", \"orders-list\", 4, \"ngIf\"], [\"class\", \"error-msg\", 4, \"ngIf\"], [1, \"orders-list\"], [\"class\", \"order-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"order-card\"], [1, \"order-header\"], [1, \"status\"], [1, \"reorder-btn\", 3, \"click\"], [1, \"error-msg\"]],\n        template: function OrderHistoryComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h4\");\n            i0.ɵɵtext(2, \"Order History\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"div\", 1)(4, \"input\", 2);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function OrderHistoryComponent_Template_input_ngModelChange_4_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.email, $event) || (ctx.email = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"button\", 3);\n            i0.ɵɵlistener(\"click\", function OrderHistoryComponent_Template_button_click_5_listener() {\n              return ctx.fetchOrderHistory();\n            });\n            i0.ɵɵtext(6, \"Get Orders\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(7, OrderHistoryComponent_div_7_Template, 2, 1, \"div\", 4)(8, OrderHistoryComponent_div_8_Template, 3, 1, \"div\", 5);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.email);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.orders && ctx.orders.length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i3.DatePipe],\n        styles: [\".order-history-container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:auto}.email-section[_ngcontent-%COMP%]{margin-bottom:20px}.email-input[_ngcontent-%COMP%]{padding:8px;margin-right:10px;width:60%}.get-order[_ngcontent-%COMP%]{background-color:green;color:#fff;padding:8px 16px;border:none;border-radius:4px;cursor:pointer}.orders-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.order-card[_ngcontent-%COMP%]{background-color:#f9f9f9;border-left:5px solid #e5ec81;border-radius:8px;padding:16px;box-shadow:0 2px 6px #0000001a}.order-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:8px}.status[_ngcontent-%COMP%]{background-color:#90f090;padding:2px 8px;border-radius:4px}.product-image[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:contain;border-radius:4px;border:1px solid #ddd}.reorder-btn[_ngcontent-%COMP%]{margin-top:10px;background-color:#fc0;color:#fff;border:none;padding:8px 12px;border-radius:4px;cursor:pointer}.error-msg[_ngcontent-%COMP%]{color:red;margin-top:20px}\"]\n      });\n    }\n  }\n  return OrderHistoryComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}