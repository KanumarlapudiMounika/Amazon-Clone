{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../auth.service\";\nimport * as i3 from \"../product.service\";\nimport * as i4 from \"../cart.service\";\nimport * as i5 from \"../order.service\";\nimport * as i6 from \"@angular/material/snack-bar\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/forms\";\nconst _c0 = a0 => ({\n  \"background-image\": a0\n});\nfunction ProductDetailsComponent_div_41_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"img\", 25);\n    i0.ɵɵelementStart(2, \"h2\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\")(5, \"strong\");\n    i0.ɵɵtext(6, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\")(9, \"strong\");\n    i0.ɵɵtext(10, \"Price:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\")(13, \"Strong\");\n    i0.ɵɵtext(14, \"Rating:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ProductDetailsComponent_div_41_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.addToCart());\n    });\n    i0.ɵɵtext(17, \"Add to Cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ProductDetailsComponent_div_41_Template_button_click_18_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.buyNow());\n    });\n    i0.ɵɵtext(19, \"Buy\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r1.product.name);\n    i0.ɵɵproperty(\"src\", \"/images/Products/\" + ctx_r1.product.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.product.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.product.description, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.product.price, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.product.rating);\n  }\n}\nfunction ProductDetailsComponent_div_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2, \"Loading Product Details...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductDetailsComponent_div_47_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"h4\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"img\", 25);\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ProductDetailsComponent_div_47_div_1_Template_button_click_6_listener() {\n      const product_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.View(product_r4.name));\n    });\n    i0.ɵɵtext(7, \"View\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r4.name);\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate(\"alt\", product_r4.name);\n    i0.ɵɵproperty(\"src\", \"/images/Products/\" + product_r4.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"price:\", product_r4.price, \"\");\n  }\n}\nfunction ProductDetailsComponent_div_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtemplate(1, ProductDetailsComponent_div_47_div_1_Template, 8, 4, \"div\", 27);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.relatedProducts);\n  }\n}\nexport let ProductDetailsComponent = /*#__PURE__*/(() => {\n  class ProductDetailsComponent {\n    constructor(route, router, authService, productService, cartService, orderService, snackBar) {\n      this.route = route;\n      this.router = router;\n      this.authService = authService;\n      this.productService = productService;\n      this.cartService = cartService;\n      this.orderService = orderService;\n      this.snackBar = snackBar;\n      this.products = [];\n      this.relatedProducts = [];\n      this.subcategory = '';\n      this.backgroundImages = ['/images/catagories/bg1.jpg'];\n      this.currentBackground = this.backgroundImages[0];\n      this.bgIndex = 0;\n      this.isSidebarClosed = false;\n    }\n    ngOnInit() {\n      this.loadProductFromRoute();\n      this.startBackgroundRotation();\n    }\n    loadProductFromRoute() {\n      this.route.paramMap.subscribe(params => {\n        const productName = decodeURIComponent(params.get('name') || '');\n        if (!productName) return;\n        this.productService.getProductByName(productName).subscribe({\n          next: data => {\n            if (data && data.length > 0) {\n              this.product = data[0];\n              this.loadRelatedProducts(this.product);\n            } else {\n              console.warn('Product not found');\n            }\n          },\n          error: err => console.error('Error fetching product', err)\n        });\n      });\n    }\n    loadRelatedProducts(product) {\n      this.productService.getRelatedProducts(product.category, product.subcategory, product.name).subscribe({\n        next: related => this.relatedProducts = related,\n        error: err => console.error('Error fetching related products', err)\n      });\n    }\n    startBackgroundRotation() {\n      this.currentBackground = this.backgroundImages[this.bgIndex];\n      setInterval(() => {\n        this.bgIndex = (this.bgIndex + 1) % this.backgroundImages.length;\n        this.currentBackground = this.backgroundImages[this.bgIndex];\n      }, 5000);\n    }\n    toggleSidebar() {\n      this.isSidebarClosed = !this.isSidebarClosed;\n    }\n    goHome() {\n      this.router.navigate(['/home']);\n    }\n    goToCart() {\n      this.router.navigate(['/cart']);\n    }\n    viewOrders() {\n      this.router.navigate(['/orders']);\n    }\n    viewProfile() {\n      this.router.navigate(['/viewProfile']);\n    }\n    updateProfile() {\n      this.router.navigate(['/profile']);\n    }\n    viewProduct(name) {\n      this.router.navigate(['/product-details', name]);\n    }\n    addToCart() {\n      const userId = this.authService.getUserId();\n      if (!userId || userId === 0) {\n        this.showSnackBar('User not logged in', 'snackbar-error');\n        return;\n      }\n      this.cartService.addToCart(this.product.id, 1, userId).subscribe({\n        next: () => this.showSnackBar('Product added to the cart!', 'snackbar-success'),\n        error: err => {\n          console.error('Error adding to cart:', err);\n          this.showSnackBar('Failed to add the product.', 'snackbar-error');\n        }\n      });\n    }\n    buyNow() {\n      const userEmail = this.authService.getUserEmail();\n      if (!userEmail) {\n        this.showSnackBar('User not logged in', 'snackbar-error');\n        return;\n      }\n      const order = {\n        email: userEmail,\n        amount: this.product.price,\n        description: this.product.description,\n        productName: this.product.name,\n        paymentProvider: 'Cash on Delivery',\n        transactionId: 'N/A',\n        status: 'Pending'\n      };\n      this.orderService.placeOrder(order).subscribe({\n        next: () => {\n          this.showSnackBar('Order placed successfully!', 'snackbar-success');\n          this.router.navigate(['/orders']);\n        },\n        error: err => {\n          console.error('Order placement failed:', err);\n          this.showSnackBar('Failed to place order.', 'snackbar-error');\n        }\n      });\n    }\n    showSnackBar(message, panelClass) {\n      this.snackBar.open(message, 'Close', {\n        duration: 3000,\n        verticalPosition: 'top',\n        panelClass: [panelClass]\n      });\n    }\n    static {\n      this.ɵfac = function ProductDetailsComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ProductDetailsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.ProductService), i0.ɵɵdirectiveInject(i4.CartService), i0.ɵɵdirectiveInject(i5.OrderService), i0.ɵɵdirectiveInject(i6.MatSnackBar));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ProductDetailsComponent,\n        selectors: [[\"app-product-details\"]],\n        inputs: {\n          product: \"product\"\n        },\n        decls: 48,\n        vars: 8,\n        consts: [[1, \"dashboard-container\", 3, \"ngStyle\"], [1, \"glass-effect\"], [1, \"header\"], [1, \"toggle-btn\", 3, \"click\"], [1, \"fas\", \"fa-bars\"], [1, \"fas\", \"fa-home\", \"home-icon\", 3, \"click\"], [1, \"search-container\"], [\"type\", \"text\", \"placeholder\", \"Search for products...\"], [1, \"fas\", \"fa-search\"], [1, \"action-buttons\"], [3, \"click\"], [1, \"body-section\"], [1, \"sidebar\"], [1, \"fas\", \"fa-user\"], [1, \"fas\", \"fa-eye\"], [1, \"filters\"], [1, \"rating-filter\"], [\"value\", \"\"], [\"value\", \"3\"], [\"value\", \"4\"], [\"value\", \"4.5\"], [1, \"product-container\"], [4, \"ngIf\"], [1, \"related-products-container\"], [\"class\", \"related-catagories-container\", 4, \"ngIf\"], [\"width\", \"200\", 3, \"src\", \"alt\"], [1, \"related-catagories-container\"], [\"class\", \"related-product-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"related-product-card\"]],\n        template: function ProductDetailsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"button\", 3);\n            i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_button_click_3_listener() {\n              return ctx.toggleSidebar();\n            });\n            i0.ɵɵelement(4, \"i\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"i\", 5);\n            i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_i_click_5_listener() {\n              return ctx.goHome();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"div\", 6);\n            i0.ɵɵelement(7, \"input\", 7);\n            i0.ɵɵelementStart(8, \"button\");\n            i0.ɵɵelement(9, \"i\", 8);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(10, \"div\", 9)(11, \"button\", 10);\n            i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_button_click_11_listener() {\n              return ctx.viewProfile();\n            });\n            i0.ɵɵtext(12, \"Profile\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"button\", 10);\n            i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_button_click_13_listener() {\n              return ctx.viewOrders();\n            });\n            i0.ɵɵtext(14, \"Orders\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"button\", 10);\n            i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_button_click_15_listener() {\n              return ctx.goToCart();\n            });\n            i0.ɵɵtext(16, \"Cart\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(17, \"div\", 11)(18, \"div\", 12)(19, \"button\", 10);\n            i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_button_click_19_listener() {\n              return ctx.updateProfile();\n            });\n            i0.ɵɵelement(20, \"i\", 13);\n            i0.ɵɵtext(21, \" Update Profile \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"button\", 10);\n            i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_button_click_22_listener() {\n              return ctx.viewProfile();\n            });\n            i0.ɵɵelement(23, \"i\", 14);\n            i0.ɵɵtext(24, \" View Profile \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(25, \"h3\");\n            i0.ɵɵtext(26, \"Filters\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"div\", 15)(28, \"div\", 16)(29, \"label\");\n            i0.ɵɵtext(30, \"Minimum Rating:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(31, \"select\")(32, \"option\", 17);\n            i0.ɵɵtext(33, \"Select\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(34, \"option\", 18);\n            i0.ɵɵtext(35, \"3+\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(36, \"option\", 19);\n            i0.ɵɵtext(37, \"4+\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(38, \"option\", 20);\n            i0.ɵɵtext(39, \"4.5+\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(40, \"div\", 21);\n            i0.ɵɵtemplate(41, ProductDetailsComponent_div_41_Template, 20, 6, \"div\", 22)(42, ProductDetailsComponent_div_42_Template, 3, 0, \"div\", 22);\n            i0.ɵɵelementStart(43, \"div\", 23)(44, \"h3\");\n            i0.ɵɵtext(45, \"Related Products\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(46, \"div\");\n            i0.ɵɵtemplate(47, ProductDetailsComponent_div_47_Template, 2, 1, \"div\", 24);\n            i0.ɵɵelementEnd()()()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(6, _c0, \"url(\" + ctx.currentBackground + \")\"));\n            i0.ɵɵadvance(18);\n            i0.ɵɵclassProp(\"closed\", ctx.isSidebarClosed);\n            i0.ɵɵadvance(23);\n            i0.ɵɵproperty(\"ngIf\", ctx.product);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.product);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngIf\", ctx.relatedProducts.length > 0);\n          }\n        },\n        dependencies: [i7.NgForOf, i7.NgIf, i7.NgStyle, i8.NgSelectOption, i8.ɵNgSelectMultipleOption],\n        styles: [\".dashboard-container[_ngcontent-%COMP%]{min-height:100vh;background-size:cover;background-repeat:no-repeat;background-position:center;backdrop-filter:blur(1px);padding:20px;color:#fff;font-family:Segoe UI,sans-serif}.glass-effect[_ngcontent-%COMP%]{background:#ffffff03;border-radius:16px;padding:20px;backdrop-filter:blur(1px);box-shadow:0 4px 30px #0000001a}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#131921e6;padding:10px 20px;border-radius:8px}.toggle-btn[_ngcontent-%COMP%], .fa-home-icon[_ngcontent-%COMP%]{color:#fff;font-size:20px;cursor:pointer;margin-right:15px}.brand[_ngcontent-%COMP%]{color:#fff;font-size:24px;font-weight:700}.search-container[_ngcontent-%COMP%]{flex:1;margin-left:20px;display:flex;align-items:center}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:50%;padding:8px 12px;border-radius:6px;border:none;outline:none;font-size:16px;align-items:center}.search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#febd69;border:none;padding:8px 12px;margin-left:10px;border-radius:6px;cursor:pointer}.catagories-container[_ngcontent-%COMP%], .catagories-container-search[_ngcontent-%COMP%]{flex:1;margin-left:20px}.products[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px;margin-top:20px}.filters[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px;margin-bottom:15px;color:#222}.filters[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin:10px 0 5px;font-weight:600;color:#222}h3[_ngcontent-%COMP%]{color:#222}.filters[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:65%;padding:10px;border-radius:12px;border:1px solid rgba(0,0,0,.1);background:#ffffff80;margin-bottom:12px;font-size:14px;outline:none}.filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40%;padding:10px;background:#007bff;border:none;color:#fff;font-weight:700;border-radius:12px;cursor:pointer;transition:.3s}.filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#0056b3}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#37475a;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer}.body-section[_ngcontent-%COMP%]{display:flex;margin-top:20px}.sidebar[_ngcontent-%COMP%]{background-color:#ffffff1a;padding:15px;border-radius:12px;width:200px;transition:all .3s}.sidebar.closed[_ngcontent-%COMP%]{display:none}.sidebar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;background-color:#232f3e;color:#fff;border:none;padding:8px 10px;margin-bottom:10px;border-radius:8px;cursor:pointer}.catagories-container[_ngcontent-%COMP%]{flex:1;margin-left:20px}.product-container[_ngcontent-%COMP%]{text-align:center;color:#000;font-family:Arial,sans-serif}.related-products-container[_ngcontent-%COMP%]{display:flex;margin-top:20px;flex-wrap:wrap;flex-direction:row;justify-content:center;gap:20px;padding:20px}.related-product-card[_ngcontent-%COMP%]{border:1px solid #ccc;padding:15px;width:200px;color:#232f3e;text-align:center;border-radius:10px;background-color:beige;box-shadow:0 2px 5px #0000001a}.related-catagories-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:10px}.related-product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:180px;height:180px;object-fit:cover;border-radius:5px}h3[_ngcontent-%COMP%]{color:#000}button[_ngcontent-%COMP%]{padding:8px 12px;margin-top:10px;cursor:pointer;border:none;border-radius:4px;background-color:#eba30a;color:#fff;font-size:14px}button[_ngcontent-%COMP%]:hover{background-color:#eba30a}\"]\n      });\n    }\n  }\n  return ProductDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}